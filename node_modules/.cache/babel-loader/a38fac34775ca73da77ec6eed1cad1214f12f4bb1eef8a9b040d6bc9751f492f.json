{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\link4\\\\OneDrive\\\\Desktop\\\\RAGlocal\\\\src\\\\components\\\\ChatInterface.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect } from \"react\";\nimport { Send, Bot, User, Loader2 } from \"lucide-react\";\nimport { useToast } from \"../hooks/use-toast\";\nimport * as React from \"react\";\nimport ReactMarkdown from 'react-markdown';\nimport { VoiceInput } from \"./VoiceInput\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ChatInterface = () => {\n  _s();\n  const [isThinking, setIsThinking] = useState(false);\n  // Load messages from sessionStorage or use default\n  const [messages, setMessages] = useState(() => {\n    const saved = sessionStorage.getItem(\"biology-chat-messages\");\n    if (saved) {\n      try {\n        const parsed = JSON.parse(saved);\n        return parsed.map(msg => ({\n          ...msg,\n          timestamp: new Date(msg.timestamp)\n        }));\n      } catch (e) {\n        // If parsing fails, fall back to default\n      }\n    }\n    return [{\n      id: \"1\",\n      text: \"Hello! I'm your Biology Research Assistant. I can help you with questions about molecular biology, genetics, ecology, anatomy, and more. What would you like to know?\",\n      sender: \"bot\",\n      timestamp: new Date()\n    }];\n  });\n  const [inputValue, setInputValue] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [apiUrl, setApiUrl] = useState(\"http://localhost:8000\"); // Default FastAPI URL\n  const messagesEndRef = useRef(null);\n  const {\n    toast\n  } = useToast();\n\n  // Scroll to bottom when messages change\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  useEffect(() => {\n    //  scrollToBottom();\n  }, [messages]);\n\n  // Persist messages to sessionStorage\n  useEffect(() => {\n    sessionStorage.setItem(\"biology-chat-messages\", JSON.stringify(messages));\n  }, [messages]);\n  const sendMessage = async () => {\n    if (!inputValue.trim()) return;\n    const userMessage = {\n      id: Date.now().toString(),\n      text: inputValue,\n      sender: \"user\",\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInputValue(\"\");\n    setIsLoading(true);\n    try {\n      const response = await fetch(`${apiUrl}/chat`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          message: inputValue,\n          conversation_id: \"biology-chat\"\n        })\n      });\n      if (!response.ok) {\n        throw new Error(\"Failed to get response from API\");\n      }\n      const data = await response.json();\n      const botMessage = {\n        id: (Date.now() + 1).toString(),\n        text: data.response || \"I'm sorry, I couldn't process your request at the moment.\",\n        sender: \"bot\",\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, botMessage]);\n    } catch (error) {\n      console.error(\"Error sending message:\", error);\n\n      // Fallback response when API is not available\n      const errorMessage = {\n        id: (Date.now() + 1).toString(),\n        text: \"I'm currently unable to connect to the backend service. Please ensure your FastAPI server is running on the configured URL. In the meantime, I'd be happy to help you with biology questions once the connection is restored!\",\n        sender: \"bot\",\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, errorMessage]);\n      toast(\"Connection Error\", {\n        description: \"Unable to connect to the biology assistant backend. Please check if your FastAPI server is running.\"\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleVoiceTranscription = question => {\n    setMessages(prev => [...prev, {\n      id: Date.now().toString(),\n      text: question,\n      sender: \"user\",\n      timestamp: new Date()\n    }]);\n    setIsThinking(true);\n  };\n  const handleKeyPress = e => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n  const handleBotResponse = (question, answer, audio) => {\n    setIsThinking(false);\n    setMessages(prev => [...prev, {\n      id: (Date.now() + 1).toString(),\n      text: answer,\n      sender: \"bot\",\n      timestamp: new Date(),\n      audio\n    }]);\n    // Optionally auto-play the audio:\n    if (audio) {\n      const audioObj = new Audio(`data:audio/webm;base64,${audio}`);\n      audioObj.play();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden animate-fade-in\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-h-[70vh] min-h-[24rem] overflow-y-auto p-6 space-y-4\",\n      children: [messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex ${message.sender === \"user\" ? \"justify-end\" : \"justify-start\"} animate-fade-in`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex items-start space-x-2 max-w-xs lg:max-w-md ${message.sender === \"user\" ? \"flex-row-reverse space-x-reverse\" : \"\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${message.sender === \"user\" ? \"bg-blue-600\" : \"bg-gradient-to-r from-green-500 to-blue-500\"}`,\n            children: message.sender === \"user\" ? /*#__PURE__*/_jsxDEV(User, {\n              className: \"h-5 w-5 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(Bot, {\n              className: \"h-5 w-5 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `px-4 py-2 rounded-lg ${message.sender === \"user\" ? \"bg-blue-600 text-white text-right\" : \"bg-gray-100 text-gray-900 text-left\"}`,\n            children: [message.sender === \"bot\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-left\",\n              children: [/*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                children: message.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 21\n              }, this), message.audio && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"mt-2 text-xs text-blue-600 hover:underline\",\n                onClick: () => {\n                  const audio = new Audio(`data:audio/webm;base64,${message.audio}`);\n                  audio.play();\n                },\n                children: \"\\u25B6\\uFE0F Play Response\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-left\",\n              children: message.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs mt-1 opacity-70 text-left\",\n              children: message.timestamp.toLocaleTimeString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this)\n      }, message.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }, this)), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-start animate-fade-in\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-r from-green-500 to-blue-500 flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(Bot, {\n              className: \"h-5 w-5 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-100 px-4 py-2 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"h-4 w-4 animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-600\",\n                children: \"Thinking...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-t border-gray-200\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(VoiceInput, {\n          onTranscription: setInputValue\n          // onBotResponse={handleBotResponse}\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: inputValue,\n          onChange: e => setInputValue(e.target.value),\n          onKeyPress: handleKeyPress,\n          placeholder: \"Ask me anything about biology...\",\n          className: \"font-montserrat flex-1 px-4 py-2 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-400 text-left\",\n          rows: 2,\n          disabled: isLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendMessage,\n          disabled: isLoading || !inputValue.trim(),\n          className: \"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors duration-200 flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(Send, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatInterface, \"T6SFigg5fwkoB4msNidbvhW4CpE=\", false, function () {\n  return [useToast];\n});\n_c = ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["useState","useRef","useEffect","Send","Bot","User","Loader2","useToast","React","ReactMarkdown","VoiceInput","jsxDEV","_jsxDEV","ChatInterface","_s","isThinking","setIsThinking","messages","setMessages","saved","sessionStorage","getItem","parsed","JSON","parse","map","msg","timestamp","Date","e","id","text","sender","inputValue","setInputValue","isLoading","setIsLoading","apiUrl","setApiUrl","messagesEndRef","toast","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","setItem","stringify","sendMessage","trim","userMessage","now","toString","prev","response","fetch","method","headers","body","message","conversation_id","ok","Error","data","json","botMessage","error","console","errorMessage","description","handleVoiceTranscription","question","handleKeyPress","key","shiftKey","preventDefault","handleBotResponse","answer","audio","audioObj","Audio","play","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","toLocaleTimeString","ref","onTranscription","value","onChange","target","onKeyPress","placeholder","rows","disabled","_c","$RefreshReg$"],"sources":["C:/Users/link4/OneDrive/Desktop/RAGlocal/src/components/ChatInterface.tsx"],"sourcesContent":["import { useState, useRef, useEffect } from \"react\";\r\nimport { Send, Bot, User, Loader2 } from \"lucide-react\";\r\nimport { useToast } from \"../hooks/use-toast\";\r\nimport * as React from \"react\";\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { VoiceInput } from \"./VoiceInput\";\r\n\r\ninterface Message {\r\n  id: string;\r\n  text: string;\r\n  sender: \"user\" | \"bot\";\r\n  timestamp: Date;\r\n  corrected?: string;audio?: string;\r\n}\r\n\r\nexport const ChatInterface = () => {\r\n  const [isThinking, setIsThinking] = useState(false);\r\n  // Load messages from sessionStorage or use default\r\n  const [messages, setMessages] = useState<Message[]>(() => {\r\n    const saved = sessionStorage.getItem(\"biology-chat-messages\");\r\n    if (saved) {\r\n      try {\r\n        const parsed = JSON.parse(saved);\r\n        return parsed.map((msg: any) => ({\r\n          ...msg,\r\n          timestamp: new Date(msg.timestamp),\r\n        }));\r\n      } catch (e) {\r\n        // If parsing fails, fall back to default\r\n      }\r\n    }\r\n    return [\r\n      {\r\n        id: \"1\",\r\n        text: \"Hello! I'm your Biology Research Assistant. I can help you with questions about molecular biology, genetics, ecology, anatomy, and more. What would you like to know?\",\r\n        sender: \"bot\",\r\n        timestamp: new Date(),\r\n      },\r\n    ];\r\n  });\r\n\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [apiUrl, setApiUrl] = useState(\"http://localhost:8000\"); // Default FastAPI URL\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const { toast } = useToast();\r\n\r\n  // Scroll to bottom when messages change\r\n  const scrollToBottom = () => {\r\n     messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n  useEffect(() => {\r\n  //  scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // Persist messages to sessionStorage\r\n  useEffect(() => {\r\n    sessionStorage.setItem(\"biology-chat-messages\", JSON.stringify(messages));\r\n  }, [messages]);\r\n\r\n  const sendMessage = async () => {\r\n    if (!inputValue.trim()) return;\r\n\r\n    const userMessage: Message = {\r\n      id: Date.now().toString(),\r\n      text: inputValue,\r\n      sender: \"user\",\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    setMessages((prev) => [...prev, userMessage]);\r\n    setInputValue(\"\");\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(`${apiUrl}/chat`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          message: inputValue,\r\n          conversation_id: \"biology-chat\",\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to get response from API\");\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      const botMessage: Message = {\r\n        id: (Date.now() + 1).toString(),\r\n        text: data.response || \"I'm sorry, I couldn't process your request at the moment.\",\r\n        sender: \"bot\",\r\n        timestamp: new Date(),\r\n      };\r\n\r\n      setMessages((prev) => [...prev, botMessage]);\r\n    } catch (error) {\r\n      console.error(\"Error sending message:\", error);\r\n\r\n      // Fallback response when API is not available\r\n      const errorMessage: Message = {\r\n        id: (Date.now() + 1).toString(),\r\n        text: \"I'm currently unable to connect to the backend service. Please ensure your FastAPI server is running on the configured URL. In the meantime, I'd be happy to help you with biology questions once the connection is restored!\",\r\n        sender: \"bot\",\r\n        timestamp: new Date(),\r\n      };\r\n\r\n      setMessages((prev) => [...prev, errorMessage]);\r\n\r\n      toast(\"Connection Error\", {\r\n        description: \"Unable to connect to the biology assistant backend. Please check if your FastAPI server is running.\",\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  \r\n const handleVoiceTranscription = (question: string) => {\r\n  setMessages(prev => [\r\n    ...prev,\r\n    {\r\n      id: Date.now().toString(),\r\n      text: question,\r\n      sender: \"user\",\r\n      timestamp: new Date(),\r\n    }\r\n  ]);\r\n  setIsThinking(true);\r\n};\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  };\r\n  const handleBotResponse = (question: string, answer: string, audio: string) => {\r\n  setIsThinking(false);\r\n  setMessages(prev => [\r\n    ...prev,\r\n    {\r\n      id: (Date.now() + 1).toString(),\r\n      text: answer,\r\n      sender: \"bot\",\r\n      timestamp: new Date(),\r\n      audio,\r\n    }\r\n  ]);\r\n  // Optionally auto-play the audio:\r\n  if (audio) {\r\n    const audioObj = new Audio(`data:audio/webm;base64,${audio}`);\r\n    audioObj.play();\r\n  }\r\n};\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden animate-fade-in\">\r\n      {/* API Configuration */}\r\n      {/* <div className=\"bg-gray-50 px-4 py-2 border-b border-gray-200\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <label className=\"text-sm text-gray-600\">FastAPI URL:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={apiUrl}\r\n            onChange={(e) => setApiUrl(e.target.value)}\r\n            className=\"text-sm px-2 py-1 border border-gray-300 rounded flex-1 max-w-xs\"\r\n            placeholder=\"http://localhost:8000\"\r\n          />\r\n        </div>\r\n      </div> */}\r\n\r\n      {/* Chat Messages */}\r\n      <div className=\"max-h-[70vh] min-h-[24rem] overflow-y-auto p-6 space-y-4\">\r\n        {messages.map((message) => (\r\n          <div\r\n            key={message.id}\r\n            className={`flex ${\r\n              message.sender === \"user\" ? \"justify-end\" : \"justify-start\"\r\n            } animate-fade-in`}\r\n          >\r\n            <div\r\n              className={`flex items-start space-x-2 max-w-xs lg:max-w-md ${\r\n                message.sender === \"user\" ? \"flex-row-reverse space-x-reverse\" : \"\"\r\n              }`}\r\n            >\r\n              <div\r\n                className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${\r\n                  message.sender === \"user\"\r\n                    ? \"bg-blue-600\"\r\n                    : \"bg-gradient-to-r from-green-500 to-blue-500\"\r\n                }`}\r\n              >\r\n                {message.sender === \"user\" ? (\r\n                  <User className=\"h-5 w-5 text-white\" />\r\n                ) : (\r\n                  <Bot className=\"h-5 w-5 text-white\" />\r\n                )}\r\n              </div>\r\n              <div\r\n                className={`px-4 py-2 rounded-lg ${\r\n                  message.sender === \"user\"\r\n                    ? \"bg-blue-600 text-white text-right\"\r\n                    : \"bg-gray-100 text-gray-900 text-left\"\r\n                }`}\r\n              >\r\n                {message.sender === \"bot\" ? (\r\n                  <div className=\"text-sm text-left\">\r\n                    <ReactMarkdown>{message.text}</ReactMarkdown>\r\n                    {/* Audio playback button for bot responses with audio */}\r\n                    {message.audio && (\r\n                      <button\r\n                        className=\"mt-2 text-xs text-blue-600 hover:underline\"\r\n                        onClick={() => {\r\n                          const audio = new Audio(`data:audio/webm;base64,${message.audio}`);\r\n                          audio.play();\r\n                        }}\r\n                      >\r\n                        ▶️ Play Response\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"text-sm text-left\">{message.text}</p>\r\n                )}\r\n                <p className=\"text-xs mt-1 opacity-70 text-left\">\r\n                  {message.timestamp.toLocaleTimeString()}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n        {isLoading && (\r\n          <div className=\"flex justify-start animate-fade-in\">\r\n            <div className=\"flex items-start space-x-2\">\r\n              <div className=\"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-r from-green-500 to-blue-500 flex items-center justify-center\">\r\n                <Bot className=\"h-5 w-5 text-white\" />\r\n              </div>\r\n              <div className=\"bg-gray-100 px-4 py-2 rounded-lg\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                  <span className=\"text-sm text-gray-600\">Thinking...</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n\r\n      {/* Input Area */}\r\n      <div className=\"p-4 border-t border-gray-200\">\r\n        <div className=\"flex space-x-2\">\r\n          <VoiceInput\r\n             onTranscription={setInputValue}\r\n            // onBotResponse={handleBotResponse}\r\n          />\r\n          <textarea\r\n            value={inputValue}\r\n            onChange={(e) => setInputValue(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n            placeholder=\"Ask me anything about biology...\"\r\n            className=\"font-montserrat flex-1 px-4 py-2 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-400 text-left\"\r\n            rows={2}\r\n            disabled={isLoading}\r\n          />\r\n          <button\r\n            onClick={sendMessage}\r\n            disabled={isLoading || !inputValue.trim()}\r\n            className=\"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors duration-200 flex items-center justify-center\"\r\n          >\r\n            <Send className=\"h-5 w-5\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}